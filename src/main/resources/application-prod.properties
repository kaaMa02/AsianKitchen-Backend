################################
# SERVER
################################
# Render injects $PORT; default to 8080 locally
server.port=${PORT:8080}

################################
# DATASOURCE
################################
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}?sslmode=${DATABASE_SSL:require}
spring.datasource.username=${DATABASE_USERNAME}
spring.datasource.password=${DATABASE_PASSWORD}

################################
# JPA / HIBERNATE
################################
# In production validate your schema
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:false}
spring.jpa.open-in-view=false

################################
# FLYWAY
################################
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.validate-migration-naming=true
spring.flyway.clean-disabled=true
# if this is an existing DB with no schema history table yet, uncomment:
# spring.flyway.baseline-on-migrate=true

################################
# JWT
################################
jwt.secret=${JWT_SECRET}
jwt.expiration-ms=${JWT_EXPIRATION_MS:3600000}

################################
# MAIL (Amazon SES SMTP)
################################
spring.mail.host=${MAIL_HOST:smtp-relay.brevo.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.default-encoding=UTF-8

# Who you send FROM (must be your verified domain)
app.mail.from=${MAIL_FROM:no-reply@asian-kitchen.online}

# Where to route messages inside your app
app.mail.to.contact=${MAIL_TO_CONTACT:asian.kitchen84@gmail.com}
app.mail.to.reservations=${MAIL_TO_BOOKINGS:asian.kitchen84@gmail.com}

# --- Security / Cookies ---
app.security.auth-cookie-name=AK_AUTH
app.security.cookie-secure=true
app.security.same-site=None

################################
# CORS (restrict to your prod frontends)
################################
app.cors.allowed-origins=https://asian-kitchen.online,https://admin.asian-kitchen.online,https://asiankitchen-frontend.onrender.com

################################
# STRIPE (if using payments)
################################
stripe.secret-key=${STRIPE_SECRET_KEY}
stripe.webhook-secret=${STRIPE_WEBHOOK_SECRET}
stripe.currency=chf

# VAT (read from env if set, default to 2.6%)
vat.ratePercent=${VAT_RATE_PERCENT:2.6}

# Delivery zone (read from env if set; fallback to your current list + message)
app.delivery.allowed-plz=${APP_DELIVERY_ALLOWED_PLZ:4600,4601,4609,4612,4613,4622,4623,4632}
app.delivery.reject-message=${APP_DELIVERY_REJECT_MESSAGE:We currently deliver only to 4632 Trimbach. Please switch to Takeaway or use an address within our zone.}

################################
# LOGGING
################################
logging.level.root=INFO
logging.level.ch.asiankitchen=DEBUG

################################
# MISC
################################
spring.thymeleaf.check-template-location=false