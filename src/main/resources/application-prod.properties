################################
# SERVER
################################
server.port=${PORT:8080}

################################
# DATASOURCE
################################
spring.datasource.driver-class-name=org.postgresql.Driver
spring.datasource.url=jdbc:postgresql://${DATABASE_HOST}:${DATABASE_PORT}/${DATABASE_NAME}?sslmode=${DATABASE_SSL:require}
spring.datasource.username=${DATABASE_USERNAME}
spring.datasource.password=${DATABASE_PASSWORD}

################################
# JPA / HIBERNATE
################################
spring.jpa.hibernate.ddl-auto=validate
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:true}
spring.jpa.open-in-view=false

################################
# FLYWAY
################################
spring.flyway.enabled=true
spring.flyway.locations=classpath:db/migration
spring.flyway.validate-migration-naming=true
spring.flyway.clean-disabled=true

################################
# JWT
################################
jwt.secret=${JWT_SECRET}
jwt.expiration-ms=${JWT_EXPIRATION_MS:3600000}

################################
# MAIL
################################
spring.mail.host=${MAIL_HOST:smtp-relay.brevo.com}
spring.mail.port=${MAIL_PORT:587}
spring.mail.username=${MAIL_USERNAME}
spring.mail.password=${MAIL_PASSWORD}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.default-encoding=UTF-8

app.mail.from=${MAIL_FROM:no-reply@asian-kitchen.online}
app.mail.to.contact=${MAIL_TO_CONTACT:asian.kitchen84@gmail.com}
app.mail.to.reservations=${MAIL_TO_BOOKINGS:asian.kitchen84@gmail.com}

logging.level.org.springframework.mail=DEBUG
logging.level.org.springframework.mail.javamail=DEBUG
spring.mail.properties.mail.debug=false

################################
# SECURITY / COOKIES
################################
app.security.auth-cookie-name=AK_AUTH
app.security.cookie-domain=${APP_SECURITY_COOKIE_DOMAIN:asian-kitchen.online}
app.security.cookie-secure=true
app.security.same-site=None

################################
# CORS
################################
app.cors.allowed-origins=https://asian-kitchen.online,https://admin.asian-kitchen.online,https://asiankitchen-frontend.onrender.com

################################
# STRIPE
################################
stripe.secret-key=${STRIPE_SECRET_KEY}
stripe.webhook-secret=${STRIPE_WEBHOOK_SECRET}
stripe.currency=chf

################################
# VAT
################################
vat.ratePercent=${VAT_RATE_PERCENT:2.6}

################################
# DELIVERY
################################
app.delivery.allowed-plz=${APP_DELIVERY_ALLOWED_PLZ:4600,4601,4609,4612,4613,4622,4623,4632}
app.delivery.reject-message=${APP_DELIVERY_REJECT_MESSAGE:We currently deliver only to 4632 Trimbach. Please switch to Takeaway or use an address within our zone.}
app.delivery.min-order-chf=${APP_DELIVERY_MIN_ORDER_CHF:30.00}
app.delivery.fee-chf=${APP_DELIVERY_FEE_CHF:5.00}
app.delivery.free-threshold-chf=${APP_DELIVERY_FREE_THRESHOLD_CHF:100.00}
app.timezone=${APP_TIMEZONE:Europe/Zurich}
app.delivery.close-buffer-minutes=${APP_DELIVERY_CLOSE_BUFFER_MINUTES:45}

################################
# LOGGING
################################
logging.level.root=INFO
logging.level.ch.asiankitchen=DEBUG
logging.level.org.springframework.security=DEBUG

################################
# MISC
################################
spring.thymeleaf.check-template-location=false

# Public site base (used to build absolute links in emails)
app.public.base-url=${APP_PUBLIC_BASE_URL:https://asian-kitchen.online}

# --- Web Push / VAPID ---
app.webpush.subject=${APP_WEBPUSH_SUBJECT:mailto:owner@asian-kitchen.online}
app.webpush.public-key=${APP_WEBPUSH_PUBLICKEY:BIPxX1_XFPzARSbOM5nfzaR6MEVlbBV9UvGCZ0nDs1-IDEWAytSyr_QjtCH-LVOCbqGVFr6G1g1_vDa4_OjG7uA}
app.webpush.private-key=${APP_WEBPUSH_PRIVATEKEY:9Pq9hhxf-GcI13rsYDekOlOqfJPPl1xQ7zjuyx2HV8A}

# TEMP for debugging (turn off later!)
logging.level.org.hibernate.SQL=INFO
logging.level.org.hibernate.orm.jdbc.bind=INFO
logging.level.org.springframework.transaction=INFO
# Quiet the email noise while we debug payments
logging.level.org.eclipse.angus.mail=INFO
logging.level.jakarta.mail=INFO
